{"version":3,"sources":["../../../../src/demo/app/app.module.ts"],"names":[],"mappings":"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","file":"app.module.js","sourceRoot":"","sourcesContent":["import { NgModule, ApplicationRef } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { FormsModule } from '@angular/forms';\nimport { HttpModule } from '@angular/http';\n\nimport { removeNgStyles, createNewHosts, createInputTransfer } from '@angularclass/hmr';\nimport { RouterModule, PreloadAllModules } from '@angular/router';\nimport { NgxFormErrorsModule } from 'ngx-form-errors';\n\nimport { MaterialModule } from './material.module';\nimport { ENV_PROVIDERS } from './environment';\nimport { ROUTES } from './app.routes';\n\n// App is our top level component\nimport { AppComponent } from './app.component';\nimport { APP_RESOLVER_PROVIDERS } from './app.resolver';\nimport { AppState, InternalStateType } from './app.service';\nimport { HomeComponent } from './home';\nimport { NoContentComponent } from './no-content';\n\nimport '../styles/styles.scss';\nimport '../styles/headings.css';\n\n// Application wide providers\nconst APP_PROVIDERS = [ ...APP_RESOLVER_PROVIDERS, AppState ];\n\nexport type StoreType = {\n  state: InternalStateType,\n  restoreInputValues: () => void,\n  disposeOldHosts: () => void\n};\n\nimport { MyLibModule } from 'my-lib';\n\n@NgModule({\n  bootstrap: [ AppComponent ],\n  declarations: [\n    AppComponent,\n    HomeComponent,\n    NoContentComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    FormsModule,\n    HttpModule,\n    RouterModule.forRoot(ROUTES, { useHash: true, preloadingStrategy: PreloadAllModules }),\n    MaterialModule,\n    NgxFormErrorsModule.forRoot()\n  ],\n  providers: [\n    ENV_PROVIDERS,\n    APP_PROVIDERS\n  ]\n})\nexport class AppModule {\n\n  constructor(\n    public appRef: ApplicationRef,\n    public appState: AppState\n  ) { }\n\n  public hmrOnInit(store: StoreType) {\n    if (!store || !store.state) {\n      return;\n    }\n    console.log('HMR store', JSON.stringify(store, null, 2));\n    /**\n     * Set state\n     */\n    this.appState._state = store.state;\n    /**\n     * Set input values\n     */\n    if ('restoreInputValues' in store) {\n      let restoreInputValues = store.restoreInputValues;\n      setTimeout(restoreInputValues);\n    }\n\n    this.appRef.tick();\n    delete store.state;\n    delete store.restoreInputValues;\n  }\n\n  public hmrOnDestroy(store: StoreType) {\n    const cmpLocation = this.appRef.components.map((cmp) => cmp.location.nativeElement);\n    /**\n     * Save state\n     */\n    const state = this.appState._state;\n    store.state = state;\n    /**\n     * Recreate root elements\n     */\n    store.disposeOldHosts = createNewHosts(cmpLocation);\n    /**\n     * Save input values\n     */\n    store.restoreInputValues  = createInputTransfer();\n    /**\n     * Remove styles\n     */\n    removeNgStyles();\n  }\n\n  public hmrAfterDestroy(store: StoreType) {\n    /**\n     * Display new elements\n     */\n    store.disposeOldHosts();\n    delete store.disposeOldHosts;\n  }\n\n}\n"]}